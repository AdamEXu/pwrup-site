---
// Redirect /sign-up to Google Forms
export const prerender = false;

if (Astro.url.searchParams.get('internal') === "true") {
    return Astro.redirect('https://docs.google.com/forms/d/e/1FAIpQLScxtKLT8RRvoEpeMEobD0_nWtot29ryoKWw9naw2nxv6lT9VQ/viewform?usp=header');
}

if (Astro.url.searchParams.get('role')) {
    const role = Astro.url.searchParams.get('role');
    const rolesMap: Record<string, string> = {
        'business': 'Business',
        'marketing': 'Marketing',
        'software': 'Software',
        'hardware': 'Hardware',
    };

    if (role && rolesMap[role]) {
        const roleName = rolesMap[role];
        return Astro.redirect(`https://docs.google.com/forms/d/e/1FAIpQLSfGztcsv36DX8pSdFCm8Tai8MZD1ZnjdFHDCkIhgWYq6FIVeg/viewform?usp=pp_url&entry.1824823162=${roleName}`);
    }
}

return Astro.redirect('https://docs.google.com/forms/d/e/1FAIpQLSfGztcsv36DX8pSdFCm8Tai8MZD1ZnjdFHDCkIhgWYq6FIVeg/viewform?usp=header');
---
