// Redirect /sign-up to Google Forms
export const prerender = false;

if (Astro.url.searchParams.get('role')) {
    const role = Astro.url.searchParams.get('role');
    const rolesMap: Record<string, string> = {
        'business': 'Business',
        'marketing': 'Marketing',
        'software': 'Software',
        'hardware': 'Hardware',
    };

    if (role && rolesMap[role]) {
        const roleName = rolesMap[role];
        return Astro.redirect(`https://docs.google.com/forms/d/e/1FAIpQLScjKOXG0H6Z3s7fO50m3nFT2N5nLKwqV8_ex_FuLvzWRhGUpg/viewform?usp=pp_url&entry.131527022=${roleName}`);
    }
}

return Astro.redirect('https://docs.google.com/forms/d/e/1FAIpQLSfGztcsv36DX8pSdFCm8Tai8MZD1ZnjdFHDCkIhgWYq6FIVeg/viewform?usp=header');